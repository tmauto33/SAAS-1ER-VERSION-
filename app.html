<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>OptimizeX PRO</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
</head>
<body>
    <div class="app-container">
        <aside class="sidebar">
            <div class="logo"><i data-lucide="zap"></i> OX<span>PRO</span></div>
            <nav>
                <button class="nav-item active" onclick="switchTab('analyse', this)"><i data-lucide="layout-dashboard"></i> <span>Analyse</span></button>
                <button class="nav-item" onclick="switchTab('expertise', this)"><i data-lucide="clipboard-check"></i> <span>Expertise</span></button>
                <button class="nav-item" onclick="switchTab('nego', this)"><i data-lucide="trending-down"></i> <span>N√©go</span></button>
                <button class="nav-item" onclick="switchTab('dashboard', this)"><i data-lucide="database"></i> <span>Historique</span></button>
                <button class="nav-item" onclick="switchTab('annonce', this)"><i data-lucide="megaphone"></i> <span>Annonce</span></button>
            </nav>
        </aside>

        <main class="main-content">
            <section id="analyse" class="view">
                <div class="hero-card">
                    <h1>Dossier <span>Analyse</span></h1>
                    <button class="btn-primary" onclick="lookupVehicle()">V√âHICULE TEST</button>
                </div>
                <div class="dashboard-grid">
                    <div class="card">
                        <h3><i data-lucide="car"></i> Identification</h3>
                        <input type="text" id="plate" placeholder="AA-123-AA" class="plate-style">
                        <input type="text" id="model-name" placeholder="Marque & Mod√®le">
                        <input type="number" id="km" placeholder="Kilom√©trage" oninput="runCalculations()">
                        <textarea id="v-notes" placeholder="Notes psychologie vendeur..." style="height: 60px;"></textarea>
                    </div>
                    <div class="card">
                        <h3><i data-lucide="calculator"></i> Finance</h3>
                        <label>Valeur March√© (‚Ç¨)</label>
                        <input type="number" id="market-val" oninput="runCalculations()" placeholder="Prix de revente">
                        <label>Prix d'Achat (‚Ç¨)</label>
                        <input type="number" id="target-price" oninput="runCalculations()" placeholder="Prix pay√© au vendeur">
                        <label>Frais Administratifs (‚Ç¨)</label>
                        <input type="number" id="fees-admin" value="0" oninput="runCalculations()">
                        <div class="roi-badge">ROI : <span id="roi-val">0</span>%</div>
                    </div>
                    <div class="card">
                        <h3><i data-lucide="user"></i> Contact</h3>
                        <input type="text" id="v-name" placeholder="Nom du vendeur">
                        <input type="text" id="v-phone" placeholder="T√©l√©phone">
                        <select id="buy-status">
                            <option value="En attente">‚è≥ En attente</option>
                            <option value="ACHET√â">‚úÖ ACHET√â</option>
                            <option value="REFUS√â">‚ùå REFUS√â</option>
                        </select>
                        <button class="btn-orange" onclick="saveCurrentDeal()">üíæ SAUVEGARDER</button>
                    </div>
                    <div class="card dark-card">
                        <h3><i data-lucide="info"></i> Synth√®se</h3>
                        <div class="flash-item"><span>Marge Net</span><strong id="flash-marge">0 ‚Ç¨</strong></div>
                        <div class="flash-item"><span>Frais IA</span><strong id="flash-repairs">0 ‚Ç¨</strong></div>
                        <div class="flash-item"><span>Score</span><strong id="flash-score">100/100</strong></div>
                    </div>
                </div>
            </section>

            <section id="expertise" class="view" style="display:none;">
                <div class="hero-card"><h1>Expertise <span>27 Points</span></h1></div>
                <div id="checklist-render" class="checklist-grid"></div>
                <div class="card" style="margin-top:20px;">
                    <h3>Frais de remise en √©tat (IA)</h3>
                    <input type="number" id="repairs" readonly style="background:#f1f5f9; font-weight:bold; color:var(--accent);">
                    <textarea id="body-defects" placeholder="D√©tails des r√©parations √† pr√©voir..."></textarea>
                </div>
            </section>

            <section id="nego" class="view" style="display:none;">
                <div class="hero-card"><h1>Strat√©gie <span>Ackermann</span></h1></div>
                <div id="ackermann-timeline" class="dashboard-grid"></div>
            </section>

            <section id="dashboard" class="view" style="display:none;">
                <div class="hero-card"><h1>Historique</h1></div>
                <div id="history-list" class="dashboard-grid"></div>
            </section>

            <section id="annonce" class="view" style="display:none;">
                <div class="card">
                    <textarea id="ad-output" rows="15" style="width:100%; border:none; outline:none; font-family:inherit;"></textarea>
                    <button class="btn-orange" onclick="copyAd()">COPIER L'ANNONCE</button>
                </div>
            </section>
        </main>

        <footer class="ia-status-bar">
            <div class="stat-group">
                <small>B√âN√âFICE</small>
                <div class="profit-value">+ <span id="marge-val">0</span> ‚Ç¨</div>
            </div>
            <div class="ia-central-brain">
                <div class="brain-pulse"></div>
                <div class="ia-text-wrap">
                    <div id="ia-verdict">ANALYSE...</div>
                    <div class="confidence-bar-bg"><div id="confidence-level" class="confidence-bar-fill"></div></div>
                </div>
            </div>
            <div class="stat-group">
                <small>ACHAT MAX</small>
                <div class="advice-value"><span id="ia-advice">0</span> ‚Ç¨</div>
            </div>
        </footer>
    </div>

    <div id="recap-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2 id="recap-model">D√©tails</h2>
                <button onclick="closeRecap()" class="close-btn">&times;</button>
            </div>
            <div class="recap-grid">
                <div><small>VENDEUR</small><p id="recap-vendeur"></p></div>
                <div><small>MARGE</small><p id="recap-marge" style="color:var(--success-green); font-weight:800;"></p></div>
            </div>
            <div class="recap-objection">
                <strong>üí° RIPOSTE N√âGO :</strong>
                <p id="recap-riposte"></p>
            </div>
            <button class="btn-delete" id="delete-btn" style="margin-top:15px;">SUPPRIMER LE DOSSIER</button>
        </div>
    </div>

    <script src="script.js"></script>
</body>
</html>
