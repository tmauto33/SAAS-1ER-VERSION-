/* --- OPTIMISATION SMARTPHONE (Remplacement de l'ancien Media Query) --- */
@media (max-width: 768px) {
    /* On empile les éléments verticalement */
    .app-container {
        flex-direction: column;
        height: 100vh;
    }

    /* MENU : On le transforme en barre de navigation basse (Style App) */
    .sidebar {
        width: 100%;
        height: 70px;
        position: fixed;
        bottom: 0;
        left: 0;
        z-index: 2000;
        padding: 0;
        background: var(--primary);
        flex-direction: row;
        border-top: 1px solid rgba(255,255,255,0.1);
    }

    .logo { display: none; } /* On cache le logo pour gagner de la place */

    .sidebar nav {
        display: flex;
        flex-direction: row;
        width: 100%;
        justify-content: space-around;
        align-items: center;
        overflow-x: hidden; /* Empêche le scroll horizontal du menu */
    }

    .nav-item {
        flex-direction: column; /* Icône au-dessus du texte */
        gap: 4px;
        padding: 8px 0;
        font-size: 0.6rem;
        text-align: center;
        width: 20%; /* 5 boutons = 20% chacun */
        margin: 0;
        border-radius: 0;
        justify-content: center;
        background: transparent !important; /* Force le fond transparent */
        box-shadow: none !important;
    }

    .nav-item i { width: 20px; height: 20px; }
    
    .nav-item.active {
        color: var(--accent);
        border-bottom: 3px solid var(--accent);
    }

    /* ZONE DE CONTENU PRINCIPALE */
    .main-content {
        padding: 15px;
        padding-bottom: 180px; /* Espace crucial pour ne pas être caché par la barre IA */
    }

    .hero-card {
        flex-direction: column;
        align-items: flex-start;
        gap: 15px;
    }

    .hero-card h1 { font-size: 1.5rem; }

    /* Grilles en une seule colonne */
    .dashboard-grid, .checklist-grid {
        grid-template-columns: 1fr !important;
    }

    /* BARRE IA : Elle doit flotter juste au-dessus du menu mobile */
    .ia-status-bar {
        position: fixed;
        left: 10px;
        right: 10px;
        bottom: 80px; /* Juste au-dessus de la barre de nav (70px + 10px marge) */
        width: auto;
        height: auto;
        padding: 12px 15px;
        flex-wrap: wrap; /* On empile les infos IA si l'écran est trop étroit */
        border-radius: 20px;
        gap: 10px;
        box-shadow: 0 -5px 20px rgba(0,0,0,0.3);
    }

    .ia-central-brain { order: -1; width: 100%; justify-content: flex-start; margin-bottom: 5px; }
    .profit-value, .advice-value { font-size: 1.2rem; }
    .confidence-bar-bg { width: 100px; } /* Plus courte sur mobile */

    /* CHECKLIST : Boutons plus gros pour le tactile */
    .check-item {
        flex-direction: column;
        align-items: flex-start;
        gap: 10px;
        padding: 18px;
    }

    .pill-group {
        width: 100%;
        display: flex;
    }

    .pill-btn {
        flex: 1;
        padding: 12px;
        text-align: center;
        font-size: 1rem;
    }

    /* MODAL : Plein écran ou presque sur mobile */
    .modal-content {
        width: 95%;
        margin: 5% auto;
        padding: 20px;
        border-radius: 20px;
    }
    
    .recap-grid { grid-template-columns: 1fr; } /* Une colonne dans le récap */
}
